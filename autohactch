-- ==================== AUTO HATCH MODULE ====================
-- Load t·ª´: https://raw.githubusercontent.com/maihoangphi2531/REPO/main/autohatch.luas
-- Y√™u c·∫ßu: WindUI, c√°c bi·∫øn global t·ª´ file ch√≠nh
-- ===========================================================

local Module = {}

-- ‚úÖ L·∫•y c√°c bi·∫øn c·∫ßn thi·∫øt t·ª´ file ch√≠nh
local WindUI = _G.WindUI
local Window = _G.Window
local Players = game:GetService("Players")
local c = _G.PlayerLocal
local d = _G.UserId
local e = _G.HttpService
local ConfigSystem = _G.ConfigSystem
local Toggles = _G.Toggles
local Options = _G.Options
local bQ = _G.GearPerks  -- Perk data
local bR = _G.ItemsModule  -- Items data

-- ‚úÖ L·∫•y ReplicatedStorage references
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Shared = ReplicatedStorage:WaitForChild("Shared")
local ItemsModule = require(Shared:WaitForChild("Items"))
local BuyEggRemote = Shared:WaitForChild("Pets"):WaitForChild("BuyEgg")
local EquipItemRemote = Shared:WaitForChild("Inventory"):WaitForChild("EquipItem")
local HatchRemote = Shared:WaitForChild("Pets"):WaitForChild("Hatch")

-- ‚úÖ L·∫•y Player references
local PlayerGui = c:WaitForChild("PlayerGui")
local Profile = PlayerGui:WaitForChild("Profile")
local InventoryItems = Profile:WaitForChild("Inventory"):WaitForChild("Items")
local PlayerEquips = ReplicatedStorage:WaitForChild("PlayerEquips"):WaitForChild(c.Name)
local PetEquip = PlayerEquips:WaitForChild("Pet")

-- ==================== GLOBALS ====================
local HatchGlobals = {
    isAutoHatching = false,
    isAutoBuying = false,
    selectedEgg = "",
    purchaseMethod = "Gold", -- "Gold" ho·∫∑c "Gems"
    eggsList = {},
    totalEggsBought = 0,
    totalEggsHatched = 0,
    sessionStartTime = 0,
    smartPetKeep = false, -- Toggle smart pet keep
    petPerkThresholds = {}, -- Ng∆∞·ª°ng perk cho pet (ri√™ng bi·ªát v·ªõi weapon)
    -- Config
    ConfigFile = "AnyaHub_HatchConfig_" .. c.Name .. ".txt"
}

-- ==================== UTILITY FUNCTIONS ====================
local function libNoti(msg, duration)
    WindUI:Notify({
        Title = "Auto Hatch",
        Content = msg,
        Duration = duration or 5
    })
end

local function formatNumber(num)
    if num >= 1000000 then
        return string.format("%.1fM", num / 1000000)
    elseif num >= 1000 then
        return string.format("%.1fK", num / 1000)
    else
        return tostring(num)
    end
end

local function timeElapsed(seconds)
    local hours = math.floor(seconds / 3600)
    local mins = math.floor((seconds % 3600) / 60)
    local secs = seconds % 60
    
    if hours > 0 then
        return string.format("%dh %dm %ds", hours, mins, secs)
    elseif mins > 0 then
        return string.format("%dm %ds", mins, secs)
    else
        return string.format("%ds", secs)
    end
end

-- ==================== EGG FUNCTIONS ====================
-- L·∫•y danh s√°ch eggs t·ª´ Items module
local function getEggsList()
    local eggs = {}
    
    for itemName, itemData in pairs(ItemsModule) do
        -- Ki·ªÉm tra xem c√≥ ph·∫£i l√† egg kh√¥ng (th∆∞·ªùng c√≥ Type = "Egg" ho·∫∑c t√™n ch·ª©a "Egg")
        if itemData.Type == "Egg" or string.match(itemName, "Egg") then
            table.insert(eggs, itemName)
        end
    end
    
    table.sort(eggs)
    
    -- N·∫øu kh√¥ng t√¨m th·∫•y eggs, th√™m m·ªôt s·ªë eggs ph·ªï bi·∫øn
    if #eggs == 0 then
        eggs = {
            "StarterEgg",
            "ForestEgg", 
            "DesertEgg",
            "ArcticEgg",
            "VolcanoEgg",
            "OceanEgg",
            "SpaceEgg",
            "MythicEgg",
            "LegendaryEgg",
            "StarEgg"
        }
    end
    
    return eggs
end

-- Mua egg
local function buyEgg(eggName, method)
    if not eggName or eggName == "" then
        return false
    end
    
    local success = pcall(function()
        BuyEggRemote:FireServer(eggName, method or "Gold")
    end)
    
    if success then
        HatchGlobals.totalEggsBought = HatchGlobals.totalEggsBought + 1
    end
    
    return success
end

-- T√¨m t·∫•t c·∫£ eggs trong inventory
local function findEggsInInventory()
    local eggs = {}
    
    for _, item in ipairs(InventoryItems:GetChildren()) do
        -- Ki·ªÉm tra xem item c√≥ ph·∫£i l√† egg kh√¥ng
        local itemName = item.Name
        if string.match(itemName, "Egg") or (ItemsModule[itemName] and ItemsModule[itemName].Type == "Egg") then
            table.insert(eggs, item)
        end
    end
    
    return eggs
end

-- Equip egg v√†o Pet slot
local function equipEgg(eggItem)
    if not eggItem or not eggItem.Parent then
        return false
    end
    
    local success = pcall(function()
        EquipItemRemote:FireServer(eggItem, PetEquip)
    end)
    
    return success
end

-- Hatch egg ƒë√£ ƒë∆∞·ª£c equip
local function hatchEquippedEgg()
    local success = pcall(function()
        -- L·∫•y v·ªã tr√≠ c·ªßa player ƒë·ªÉ hatch
        local character = c.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            local position = character.HumanoidRootPart.Position
            HatchRemote:FireServer(position)
        end
    end)
    
    if success then
        HatchGlobals.totalEggsHatched = HatchGlobals.totalEggsHatched + 1
    end
    
    return success
end

-- Hatch m·ªôt egg: Equip -> Hatch -> Wait
local function hatchSingleEgg(eggItem)
    -- B∆∞·ªõc 1: Equip egg
    if not equipEgg(eggItem) then
        return false
    end
    
    task.wait(0.2) -- ƒê·ª£i equip xong
    
    -- B∆∞·ªõc 2: Hatch egg ƒë√£ equip
    local success = hatchEquippedEgg()
    
    task.wait(0.3) -- ƒê·ª£i animation hatch
    
    return success
end

-- Hatch t·∫•t c·∫£ eggs trong inventory
local function hatchAllEggs()
    local eggs = findEggsInInventory()
    local hatchedCount = 0
    
    for _, egg in ipairs(eggs) do
        if hatchSingleEgg(egg) then
            hatchedCount = hatchedCount + 1
            task.wait(0.1) -- Delay nh·ªè gi·ªØa c√°c l·∫ßn hatch
        end
    end
    
    return hatchedCount
end

-- ==================== SMART PET KEEP ====================
-- L·∫•y danh s√°ch pet perks (ch·ªâ nh·ªØng perk c√≥ PetOnly = true)
local function getPetPerksList()
    local petPerks = {}
    
    for perkKey, perkData in pairs(bQ) do
        if perkData.PetOnly and perkData.PetStatRange then
            table.insert(petPerks, {
                key = perkKey,
                name = perkData.DisplayName,
                desc = perkData.DisplayDesc,
                min = perkData.PetStatRange[1] * 100,
                max = perkData.PetStatRange[2] * 100
            })
        end
    end
    
    table.sort(petPerks, function(a, b) return a.name < b.name end)
    return petPerks
end

-- Ki·ªÉm tra pet c√≥ perk ƒë·∫°t ng∆∞·ª°ng kh√¥ng
local function checkPetPerks(petItem)
    if not petItem:FindFirstChild("Perk") or not petItem.Perk:FindFirstChild("PerkValue") then
        return false, nil
    end
    
    local perkName = petItem.Perk.Value
    local perkValue = petItem.Perk.PerkValue.Value
    
    -- L·∫•y perk data
    local perkData = bQ[perkName]
    if not perkData or not perkData.PetOnly then
        return false, nil
    end
    
    -- L·∫•y ng∆∞·ª°ng t·ª´ HatchGlobals.petPerkThresholds
    local threshold = HatchGlobals.petPerkThresholds[perkName] or 0
    
    -- So s√°nh v·ªõi ng∆∞·ª°ng
    local shouldKeep = (perkValue * 100) >= threshold
    
    return shouldKeep, {
        name = perkData.DisplayName,
        value = perkValue * 100,
        threshold = threshold
    }
end

-- Recycle pet
local function recyclePet(petItem)
    if not petItem or not petItem.Parent then
        return false
    end
    
    local RecycleRemote = Shared:WaitForChild("Pets"):WaitForChild("RecyclePet")
    local success = pcall(function()
        RecycleRemote:FireServer(petItem)
    end)
    
    return success
end

-- ==================== AUTO FUNCTIONS ====================
local function startAutoBuy()
    if HatchGlobals.isAutoBuying then
        warn("‚ö†Ô∏è Auto Buy ƒë√£ ƒëang ch·∫°y!")
        return
    end
    
    if not HatchGlobals.selectedEgg or HatchGlobals.selectedEgg == "" then
        libNoti("‚ùå Vui l√≤ng ch·ªçn egg tr∆∞·ªõc!", 3)
        return
    end
    
    HatchGlobals.isAutoBuying = true
    if HatchGlobals.sessionStartTime == 0 then
        HatchGlobals.sessionStartTime = tick()
    end
    
    libNoti("‚úÖ B·∫Øt ƒë·∫ßu Auto Buy: " .. HatchGlobals.selectedEgg, 3)
    
    task.spawn(function()
        while HatchGlobals.isAutoBuying do
            local success = buyEgg(HatchGlobals.selectedEgg, HatchGlobals.purchaseMethod)
            
            if not success then
                task.wait(1)
            else
                task.wait(0.5) -- Fixed delay
            end
        end
        
        libNoti("‚èπÔ∏è ƒê√£ d·ª´ng Auto Buy", 3)
    end)
end

local function startAutoHatch()
    if HatchGlobals.isAutoHatching then
        warn("‚ö†Ô∏è Auto Hatch ƒë√£ ƒëang ch·∫°y!")
        return
    end
    
    HatchGlobals.isAutoHatching = true
    if HatchGlobals.sessionStartTime == 0 then
        HatchGlobals.sessionStartTime = tick()
    end
    
    libNoti("‚úÖ B·∫Øt ƒë·∫ßu Auto Hatch", 3)
    
    task.spawn(function()
        while HatchGlobals.isAutoHatching do
            local hatchedCount = hatchAllEggs()
            
            if hatchedCount == 0 then
                task.wait(2) -- ƒê·ª£i l√¢u h∆°n n·∫øu kh√¥ng c√≥ egg
            else
                task.wait(0.5) -- Fixed delay
            end
        end
        
        libNoti("‚èπÔ∏è ƒê√£ d·ª´ng Auto Hatch", 3)
    end)
end

-- ==================== CONFIG FUNCTIONS ====================
local function saveHatchConfig()
    if not writefile then return end
    
    -- CH·ªà l∆∞u stats ri√™ng t·ª´ng acc (kh√¥ng l∆∞u petPerkThresholds - n√≥ s·∫Ω l∆∞u qua ConfigSystem)
    local data = {
        totalEggsBought = HatchGlobals.totalEggsBought,
        totalEggsHatched = HatchGlobals.totalEggsHatched
    }
    
    pcall(function()
        writefile(HatchGlobals.ConfigFile, e:JSONEncode(data))
    end)
    
    warn("üíæ ƒê√£ l∆∞u Hatch stats (ri√™ng acc)")
end

local function loadHatchConfig()
    if not (isfile and readfile and isfile(HatchGlobals.ConfigFile)) then
        return false
    end
    
    local success = pcall(function()
        local data = e:JSONDecode(readfile(HatchGlobals.ConfigFile))
        
        -- CH·ªà load stats ri√™ng t·ª´ng acc
        HatchGlobals.totalEggsBought = data.totalEggsBought or 0
        HatchGlobals.totalEggsHatched = data.totalEggsHatched or 0
    end)
    
    if success then
        warn("üìÇ ƒê√£ load Hatch stats (ri√™ng acc)")
    end
    
    return success
end

-- ==================== UI CREATION ====================
local function createAutoHatchTab()
    local TabHatch = Window:Tab({
        Title = "Auto Hatch",
        Icon = "egg",
        Locked = false
    })
    
    TabHatch:Section({ Title = "ü•ö Auto Egg System" })
    
    TabHatch:Divider({ Text = "Egg Selection" })
    
    -- L·∫•y danh s√°ch eggs
    HatchGlobals.eggsList = getEggsList()
    
    -- Dropdown ch·ªçn egg
    local EggDropdown = TabHatch:Dropdown({
        Title = "üìã Ch·ªçn Egg",
        Description = "Ch·ªçn lo·∫°i egg mu·ªën mua",
        Values = HatchGlobals.eggsList,
        Multi = false,
        Default = HatchGlobals.selectedEgg ~= "" and {HatchGlobals.selectedEgg} or nil,
        Callback = function(selected)
            -- WindUI tr·∫£ v·ªÅ table v·ªõi 1 ph·∫ßn t·ª≠ khi Multi = false
            local eggName = type(selected) == "table" and selected[1] or selected
            if eggName and eggName ~= "" then
                HatchGlobals.selectedEgg = eggName
                HatchGlobals.purchaseMethod = "Gold" -- Lu√¥n d√πng Gold
                -- KH√îNG g·ªçi saveHatchConfig() v√¨ selectedEgg s·∫Ω ƒë∆∞·ª£c l∆∞u qua ConfigSystem
                warn("‚úÖ ƒê√£ ch·ªçn egg:", HatchGlobals.selectedEgg)
                libNoti("‚úÖ ƒê√£ ch·ªçn: " .. eggName, 2)
            end
        end
    })
    ConfigSystem.registerUIElement("selectedEgg", EggDropdown)
    
    TabHatch:Divider({ Text = "Auto Settings" })
    
    TabHatch:Divider({ Text = "Auto Settings" })
    
    -- Auto buy toggle
    local AutoBuyToggle = TabHatch:Toggle({
        Title = "üõí Auto Buy Egg",
        Description = "T·ª± ƒë·ªông mua egg ƒë√£ ch·ªçn",
        Default = false,
        Callback = function(state)
            -- ‚úÖ C·∫≠p nh·∫≠t qua Toggles wrapper ƒë·ªÉ ConfigSystem nh·∫≠n ƒë∆∞·ª£c
            if _G.Toggles and _G.Toggles.AutoBuyEgg then
                _G.Toggles.AutoBuyEgg:SetValue(state)
            end
            
            if state then
                startAutoBuy()
            else
                HatchGlobals.isAutoBuying = false
            end
        end
    })
    ConfigSystem.registerUIElement("AutoBuyEgg", AutoBuyToggle)
    
    -- Auto hatch toggle
    local AutoHatchToggle = TabHatch:Toggle({
        Title = "üê£ Auto Hatch Egg",
        Description = "T·ª± ƒë·ªông n·ªü t·∫•t c·∫£ egg trong inventory",
        Default = false,
        Callback = function(state)
            -- ‚úÖ C·∫≠p nh·∫≠t qua Toggles wrapper ƒë·ªÉ ConfigSystem nh·∫≠n ƒë∆∞·ª£c
            if _G.Toggles and _G.Toggles.AutoHatchEgg then
                _G.Toggles.AutoHatchEgg:SetValue(state)
            end
            
            if state then
                startAutoHatch()
            else
                HatchGlobals.isAutoHatching = false
            end
        end
    })
    ConfigSystem.registerUIElement("AutoHatchEgg", AutoHatchToggle)
    
    TabHatch:Divider({ Text = "Smart Pet Keep" })
    
    -- Smart Pet Keep Toggle
    local SmartPetKeepToggle = TabHatch:Toggle({
        Title = "üéØ Smart Pet Keep",
        Description = "T·ª± ƒë·ªông gi·ªØ pet c√≥ perk ƒë·∫°t ng∆∞·ª°ng, recycle c√≤n l·∫°i",
        Default = false,
        Callback = function(state)
            HatchGlobals.smartPetKeep = state
        end
    })
    
    -- Paragraph h∆∞·ªõng d·∫´n
    TabHatch:Paragraph({
        Title = "üìñ H∆∞·ªõng d·∫´n Smart Pet Keep",
        Description = "Set ng∆∞·ª°ng % cho t·ª´ng perk b√™n d∆∞·ªõi. Pet c√≥ perk ‚â• ng∆∞·ª°ng s·∫Ω ƒë∆∞·ª£c gi·ªØ, c√≤n l·∫°i s·∫Ω b·ªã recycle."
    })
    
    -- ‚úÖ T·∫†O SLIDER CHO T·ª™NG PET PERK
    local petPerks = getPetPerksList()
    for _, perk in ipairs(petPerks) do
        -- Kh·ªüi t·∫°o gi√° tr·ªã m·∫∑c ƒë·ªãnh
        if not HatchGlobals.petPerkThresholds[perk.key] then
            HatchGlobals.petPerkThresholds[perk.key] = math.round(perk.min)
        end
        
        local slider = TabHatch:Slider({
            Title = perk.name,
            Description = perk.desc .. string.format(" (Range: %.1f%% - %.1f%%)", perk.min, perk.max),
            Step = 1,
            Value = {
                Min = math.round(perk.min),
                Max = math.round(perk.max),
                Default = HatchGlobals.petPerkThresholds[perk.key]
            },
            Callback = function(value)
                HatchGlobals.petPerkThresholds[perk.key] = value
                warn(string.format("üìä Set %s threshold: %.1f%%", perk.name, value))
            end
        })
    end
    
    -- Monitor pet inventory ƒë·ªÉ auto recycle
    task.spawn(function()
        InventoryItems.ChildAdded:Connect(function(item)
            if not HatchGlobals.smartPetKeep then return end
            
            -- ƒê·ª£i item load xong
            task.wait(0.5)
            
            if not item or not item.Parent then return end
            
            local itemData = bR[item.Name]
            
            -- Ki·ªÉm tra xem c√≥ ph·∫£i pet kh√¥ng
            if not itemData or itemData.Type ~= "Pet" then return end
            
            local shouldKeep, perkInfo = checkPetPerks(item)
            
            if perkInfo then
                if shouldKeep then
                    libNoti(string.format("‚úÖ Gi·ªØ: %s | %s: %.1f%% ‚â• %.1f%%", 
                        itemData.DisplayKey or item.Name,
                        perkInfo.name,
                        perkInfo.value,
                        perkInfo.threshold
                    ), 2)
                else
                    local success = recyclePet(item)
                    if success then
                        libNoti(string.format("‚ôªÔ∏è Recycle: %s | %s: %.1f%% < %.1f%%", 
                            itemData.DisplayKey or item.Name,
                            perkInfo.name,
                            perkInfo.value,
                            perkInfo.threshold
                        ), 3)
                    end
                end
            end
        end)
    end)
    
    TabHatch:Divider({ Text = "Manual Actions" })
    
    -- Button mua 1 egg
    TabHatch:Button({
        Title = "üõí Mua 1 Egg",
        Description = "Mua 1 egg th·ªß c√¥ng",
        Callback = function()
            if not HatchGlobals.selectedEgg or HatchGlobals.selectedEgg == "" then
                libNoti("‚ùå Vui l√≤ng ch·ªçn egg tr∆∞·ªõc!", 3)
                return
            end
            
            local success = buyEgg(HatchGlobals.selectedEgg, HatchGlobals.purchaseMethod)
            if success then
                libNoti("‚úÖ ƒê√£ mua 1 " .. HatchGlobals.selectedEgg, 2)
            else
                libNoti("‚ùå Kh√¥ng th·ªÉ mua egg!", 3)
            end
        end
    })
    
    -- Button hatch all
    TabHatch:Button({
        Title = "üê£ Hatch All Eggs",
        Description = "N·ªü t·∫•t c·∫£ egg trong inventory (nh·∫•n ƒë√∫p)",
        Callback = function()
            local count = hatchAllEggs()
            if count > 0 then
                libNoti("‚úÖ ƒê√£ hatch " .. count .. " eggs", 3)
            else
                libNoti("‚ö†Ô∏è Kh√¥ng c√≥ egg trong inventory", 3)
            end
        end
    })
    
    -- Button reset stats
    TabHatch:Button({
        Title = "üîÑ Reset Statistics",
        Description = "Reset th·ªëng k√™ session",
        Callback = function()
            HatchGlobals.totalEggsBought = 0
            HatchGlobals.totalEggsHatched = 0
            HatchGlobals.sessionStartTime = tick()
            saveHatchConfig()
            libNoti("‚úÖ ƒê√£ reset th·ªëng k√™", 2)
        end
    })
    
    TabHatch:Divider({ Text = "Statistics" })
    
    -- Statistics paragraphs
    local StatsPara1 = TabHatch:Paragraph({
        Title = "üìä Session Stats",
        Description = "Loading..."
    })
    
    local StatsPara2 = TabHatch:Paragraph({
        Title = "ü•ö Eggs in Inventory",
        Description = "Loading..."
    })
    
    -- Update stats task
    task.spawn(function()
        while true do
            local eggsInInv = #findEggsInInventory()
            local sessionTime = tick() - (HatchGlobals.sessionStartTime > 0 and HatchGlobals.sessionStartTime or tick())
            
            StatsPara1:SetDesc(string.format(
                "Bought: %s | Hatched: %s\nSession Time: %s",
                formatNumber(HatchGlobals.totalEggsBought),
                formatNumber(HatchGlobals.totalEggsHatched),
                timeElapsed(math.floor(sessionTime))
            ))
            
            StatsPara2:SetDesc(string.format("%d eggs", eggsInInv))
            
            task.wait(1)
        end
    end)
    
    -- Load config
    loadHatchConfig()
end

-- ==================== INIT MODULE ====================
function Module:Init()
    -- Load config c√° nh√¢n tr∆∞·ªõc (stats ri√™ng t·ª´ng acc)
    loadHatchConfig()
    
    -- T·∫°o UI
    createAutoHatchTab()
    
    -- Hook v√†o ConfigSystem ƒë·ªÉ save/load selectedEgg (chung cho t·∫•t c·∫£ acc)
    local originalGetConfigData = ConfigSystem.getConfigData
    ConfigSystem.getConfigData = function()
        local data = originalGetConfigData()
        -- L∆∞u selectedEgg + petPerkThresholds v√†o config chung
        data.HatchGlobals = {
            selectedEgg = HatchGlobals.selectedEgg,
            petPerkThresholds = HatchGlobals.petPerkThresholds
        }
        return data
    end
    
    -- Hook v√†o loadConfigData ƒë·ªÉ load selectedEgg v√† update UI
    local originalLoadConfigData = ConfigSystem.loadConfigData
    ConfigSystem.loadConfigData = function(data)
        originalLoadConfigData(data)
        
        -- Load selectedEgg + petPerkThresholds t·ª´ config
        if data.HatchGlobals then
            if data.HatchGlobals.selectedEgg then
                HatchGlobals.selectedEgg = data.HatchGlobals.selectedEgg
                warn("‚úÖ ƒê√£ load selectedEgg t·ª´ config:", HatchGlobals.selectedEgg)
                
                -- Update UI dropdown
                task.wait(0.5) -- ƒê·ª£i UI render xong
                if ConfigSystem.UIElements and ConfigSystem.UIElements.selectedEgg then
                    local dropdown = ConfigSystem.UIElements.selectedEgg
                    if dropdown and dropdown.SetValue then
                        dropdown:SetValue({HatchGlobals.selectedEgg})
                        warn("‚úÖ ƒê√£ update UI dropdown v·ªõi:", HatchGlobals.selectedEgg)
                    end
                end
            end
            
            -- ‚úÖ Load Pet Perk Thresholds t·ª´ config
            if data.HatchGlobals.petPerkThresholds then
                for key, value in pairs(data.HatchGlobals.petPerkThresholds) do
                    HatchGlobals.petPerkThresholds[key] = value
                end
                warn("‚úÖ ƒê√£ load Pet Perk Thresholds t·ª´ config")
            end
        end
        
        -- ‚úÖ ƒê·ªíNG B·ªò TOGGLE STATES ‚Üí HATCHGLOBALS (sau 0.5s ƒë·ªÉ UI load xong)
        task.spawn(function()
            task.wait(0.5)
            local autoBuyState = _G.ToggleStates.AutoBuyEgg
            local autoHatchState = _G.ToggleStates.AutoHatchEgg
            
            if autoBuyState and not HatchGlobals.isAutoBuying then
                warn("üîÑ ƒê·ªìng b·ªô AutoBuy t·ª´ config: true")
                startAutoBuy()
            elseif not autoBuyState and HatchGlobals.isAutoBuying then
                warn("üîÑ ƒê·ªìng b·ªô AutoBuy t·ª´ config: false")
                HatchGlobals.isAutoBuying = false
            end
            
            if autoHatchState and not HatchGlobals.isAutoHatching then
                warn("üîÑ ƒê·ªìng b·ªô AutoHatch t·ª´ config: true")
                startAutoHatch()
            elseif not autoHatchState and HatchGlobals.isAutoHatching then
                warn("üîÑ ƒê·ªìng b·ªô AutoHatch t·ª´ config: false")
                HatchGlobals.isAutoHatching = false
            end
        end)
    end
    
    warn("‚úÖ Auto Hatch Module loaded!")
    libNoti("‚úÖ Auto Hatch Module ƒë√£ s·∫µn s√†ng!", 3)
end

return Module
